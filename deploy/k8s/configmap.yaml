apiVersion: v1
kind: ConfigMap
metadata:
  name: digest-config
  namespace: digest
data:
  APP_ENV: "prod"
  # Digest settings
  DIGEST_WINDOW: "60m"
  DIGEST_TOP_N: "20"
  RELEVANCE_THRESHOLD: "0.5"
  IMPORTANCE_THRESHOLD: "0.3"
  SIMILARITY_THRESHOLD: "0.6"
  AUTO_THRESHOLD_TUNING_ENABLED: "true"
  # Health & monitoring
  HEALTH_PORT: "8080"
  # Leader election
  LEADER_ELECTION_ENABLED: "true"
  LEADER_ELECTION_LEASE_NAME: "digest-scheduler-lease"
  # Telegram session
  TG_SESSION_PATH: "/app/data/tg.session"
  # LLM settings
  LLM_MODEL: "gpt-4o-mini"
  # Worker settings
  WORKER_BATCH_SIZE: "10"
  WORKER_POLL_INTERVAL: "10s"
  # Reader settings
  READER_FETCH_LIMIT: "20"
  RATE_LIMIT_RPS: "1"
  # Scheduler settings
  SCHEDULER_TICK_INTERVAL: "10m"
  SCHEDULER_CATCHUP_WINDOW: "24h"
  FACTCHECK_GOOGLE_ENABLED: "true"
  # Enrichment settings (Phase 2)
  ENRICHMENT_ENABLED: "true"
  ENRICHMENT_MAX_SOURCES: "5"
  ENRICHMENT_MAX_SECONDS: "60"
  ENRICHMENT_MIN_AGREEMENT: "0.65"
  ENRICHMENT_ALLOWLIST_DOMAINS: ""
  ENRICHMENT_DENYLIST_DOMAINS: ""
  ENRICHMENT_QUERY_TRANSLATE: "true"
  ENRICHMENT_PROVIDERS: "yacy,gdelt,eventregistry,newsapi,opensearch"
  ENRICHMENT_PROVIDER_COOLDOWN: "10m"
  ENRICHMENT_YACY_ENABLED: "true"
  ENRICHMENT_YACY_URL: "http://yacy:8090"
  ENRICHMENT_YACY_TIMEOUT: "10s"
  ENRICHMENT_YACY_MAX_RESULTS: "10"
  ENRICHMENT_EVIDENCE_TTL_DAYS: "30"
  ENRICHMENT_EVIDENCE_DEDUP_SIM: "0.98"
  ENRICHMENT_EVIDENCE_MAX_PER_ITEM: "5"
  ENRICHMENT_DAILY_BUDGET_USD: "100"
  ENRICHMENT_MONTHLY_CAP_USD: "2000"
  ENRICHMENT_GDELT_RPM: "30"
  ENRICHMENT_EVENTREGISTRY_RPM: "30"
  ENRICHMENT_NEWSAPI_RPM: "30"
  ENRICHMENT_OPENSEARCH_URL: "http://searxng:8080"
  ENRICHMENT_OPENSEARCH_RPM: "30"
